<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WoW Level Predictor</title>
    <style>
        h1, p {
        color: #ffffff;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }
        /* –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω */
        body {
        background: url('https://db4sgowjqfwig.cloudfront.net/campaigns/29929/assets/446823/Elemental_Plane_of_Earth.jpg?1428678300') no-repeat center center fixed;
        background-size: cover;
        background-color: rgba(0, 0, 0, 0.6);
        background-blend-mode: overlay;
        font-family: 'Cinzel', serif;
        color: #ffffff;
        margin: 0;
        padding: 0;
        }

        /* –û–±–µ—Ä—Ç–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .container {
            max-width: 1200px;
            margin: 50px auto;
            padding: 30px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
            backdrop-filter: blur(5px); /* –≠—Ñ—Ñ–µ–∫—Ç "—Å—Ç–µ–∫–ª–∞" */
        }

        /* –ó–∞–≥–æ–ª–æ–≤–∫–∏ */
        h1, h2, h3 {
            color: #ffcc00;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            font-weight: 700;
        }

        /* –¢–∞–±–ª–∏—Ü–∞ */
        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(10, 10, 30, 0.8);
            border: 2px solid #00aaff;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #00aaff;
        }

        th {
            background: rgba(0, 170, 255, 0.2);
            font-weight: bold;
        }

        tr:hover {
            background: rgba(0, 170, 255, 0.1);
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        button {
            background: linear-gradient(135deg, #00aaff, #0055ff);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 255, 255, 0.5);
        }

        body {
            font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; padding: 20px;
        }
        h1 {
            color: #8B0000;
        }
        label {
            display: block; margin-top: 15px;
        }
        select, input {
            width: 100%; padding: 8px; margin-top: 5px;
        }
        button {
            margin-top: 20px; padding: 10px 20px; background: #8B0000; color: white; border: none; cursor: pointer;
        }
        #result { margin-top: 20px; padding: 15px; background: #000000; border-left: 4px solid #8B0000; }

    </style>
</head>
<body>
    <h1>üîÆ WoW Level Predictor</h1>
    <p>–£–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, –¥–æ—Å—Ç–∏–≥ –ª–∏ –æ–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è.</p>

    <!-- –†–ê–°–ê -->
    <label for="race">–†–∞—Å–∞ (Race):</label>
    <select id="race" name="race">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å—É...</option>
        {% for race in races %}
            <option value="{{ race }}">{{ race }}</option>
        {% endfor %}
    </select>

    <!-- –ö–õ–ê–°–° -->
    <label for="charclass">–ö–ª–∞—Å—Å (Class):</label>
    <select id="charclass" name="charclass">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å...</option>
        {% for charclass in classes %}
            <option value="{{ charclass }}">{{ charclass }}</option>
        {% endfor %}
    </select>

    <!-- –ó–û–ù–ê -->
    <label for="zone">–ó–æ–Ω–∞ (Zone):</label>
    <select id="zone" name="zone">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∑–æ–Ω—É...</option>
        {% for zone in zones %}
            <option value="{{ zone }}">{{ zone }}</option>
        {% endfor %}
    </select>

    <label>–ì–∏–ª—å–¥–∏—è (Id –ì–∏–ª—å–¥–∏–∏, -1 = –Ω–µ—Ç):</label>
    <input type="number" id="guild" value="-1" min="-1">

    <button onclick="predict()">–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å</button>

    <div id="result" style="display:none;"></div>

    <script>
        async function predict() {
            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø–æ–ª–µ–π
            const race = document.getElementById('race').value;
            const charclass = document.getElementById('charclass').value;
            const zone = document.getElementById('zone').value;
            let guildValue = document.getElementById('guild').value;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
            if (!race || !charclass || !zone) {
                const resDiv = document.getElementById('result');
                resDiv.innerHTML = `<b>–û—à–∏–±–∫–∞:</b> –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å—É, –∫–ª–∞—Å—Å –∏ –∑–æ–Ω—É.`;
                resDiv.style.display = 'block';
                return;
            }

            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º Guild ID –≤ —á–∏—Å–ª–æ, –µ—Å–ª–∏ –ø–æ–ª–µ –Ω–µ –ø—É—Å—Ç–æ–µ
            let guildId = -1;
            if (guildValue !== '') {
                guildId = parseInt(guildValue);
                if (isNaN(guildId)) {
                    const resDiv = document.getElementById('result');
                    resDiv.innerHTML = `<b>–û—à–∏–±–∫–∞:</b> –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ –¥–ª—è Guild ID.`;
                    resDiv.style.display = 'block';
                    return;
                }
            }

            const data = {
                race: race,
                charclass: charclass,
                zone: zone,
                guild: guildId
            };

            const response = await fetch('/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            const resDiv = document.getElementById('result');

            if (result.error) {
                resDiv.innerHTML = `<b>–û—à–∏–±–∫–∞:</b> ${result.error}`;
            } else {
                resDiv.innerHTML = `
                    <b>${result.message}</b><br>
                    –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: ${(result.probability * 100).toFixed(1)}%
                `;
            }
            resDiv.style.display = 'block';
        }
    </script>
</body>
</html>